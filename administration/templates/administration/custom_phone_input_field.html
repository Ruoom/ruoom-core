{% load static %}
{% load i18n %}

<link rel="stylesheet" href="{% static 'packages/intl-tel-input/build/css/intlTelInput.css' %}">
<style>
   .iti-flag {background-image: url("{% static 'packages/intl-tel-input/build/img/flags.png' %}");}
   @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .iti__flag {background-image: url("{% static 'packages/intl-tel-input/build/img/flags@2x.png' %}");}
    }
</style>
<script src="{% static 'packages/intl-tel-input/build/js/intlTelInput.js' %}"></script>
<script>
    var international_phone_input_field = undefined;
    $(function(){
        var input = document.querySelector("#id_phone");
        international_phone_input_field = intlTelInput(input, {
            separateDialCode: true,
            utilsScript: "{% static 'packages/intl-tel-input/build/js/utils.js' %}",
            initialCountry: "{{default_country_code}}" || 'us',
          });
          $('#id_phone').on('change', function(e){
            $('input[name=phone_with_code]').val(international_phone_input_field.getNumber())
          })
    })
</script>